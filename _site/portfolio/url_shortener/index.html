<!DOCTYPE HTML>
<html>
<html lang="en-US">
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>URL Shortener - Firebase | 2nd Gig</title>
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta name="description" content="" />
	<meta name="keywords" content="" />
	<meta name="author" content="Hector Quintana" />

	<link rel="apple-touch-icon" sizes="76x76" href="/assets/favicon/apple-touch-icon.png">
	<link rel="icon" type="image/png" sizes="32x32" href="/assets/favicon/favicon-32x32.png">
	<link rel="icon" type="image/png" sizes="16x16" href="/assets/favicon/favicon-16x16.png">
	<link rel="manifest" href="/assets/favicon/site.webmanifest">
	<link rel="mask-icon" href="/assets/favicon/safari-pinned-tab.svg" color="#5bbad5">
	<meta name="msapplication-TileColor" content="#da532c">
	<meta name="theme-color" content="#ffffff">
	
	
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-131623633-1"></script>
    <script>
        window.dataLayer = window.dataLayer || [];

        function gtag() {
            dataLayer.push(arguments);
        }
        gtag('js', new Date());

        gtag('config', 'UA-131623633-1');
    </script>


	<link href="https://fonts.googleapis.com/css?family=Karla:400,700" rel="stylesheet">
	<link href="https://fonts.googleapis.com/css?family=Playfair+Display:400,400i,700" rel="stylesheet">

	<!-- Animate.css -->
	<link rel="stylesheet" href="/assets/css/animate.css">
	<!-- Icomoon Icon Fonts-->
	<link rel="stylesheet" href="/assets/css/icomoon.css">
	<!-- Bootstrap  -->
	<link href="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-GJzZqFGwb1QTTN6wy59ffF1BuGJpLSa9DkKMp0DgiMDm4iYMj70gZWKYbI706tWS"
	crossorigin="anonymous">
	<!-- Owl Carousel -->
	<link rel="stylesheet" href="/assets/css/owl.carousel.min.css">
	<link rel="stylesheet" href="/assets/css/owl.theme.default.min.css">
	<!-- Magnific Popup -->
	<link rel="stylesheet" href="/assets/css/magnific-popup.css">

	<link rel="stylesheet" href="/assets/css/style.css">
	<link rel="stylesheet" href="/assets/css/add.css">

	<!-- Modernizr JS -->
	<script src="/assets/js/modernizr-2.6.2.min.js"></script>

</head>

<body>
	<nav id="colorlib-main-nav" role="navigation">
    <a href="#" class="js-colorlib-nav-toggle colorlib-nav-toggle active"><i></i></a>
    <div class="js-fullheight colorlib-table">
        <div class="colorlib-table-cell js-fullheight">
            <div class="row">
                <div class="col-md-12">
                    <ul class="list list--nav">
                        

                        
                  
                        <li class="">
                          <a href="/">Home</a>
                        </li>
                      

                        
                  
                        <li class="">
                          <a href="/about/">About</a>
                        </li>
                      

                        
                  
                        <li class="">
                          <a href="/blog/">Blog</a>
                        </li>
                      
                    </ul>
                </div>
            </div>

            

<div class="row">
    <div class="col-md-12">
        <h2 class="head-title">Portfolio</h2>
            
                
                <a href="/portfolio/url_shortener/" class="gallery image-popup-link text-center" style="background-image: url(/assets/img/portfolio/juan-gomez-674574-unsplash.jpg);">
                    <span><i class="icon-search3"></i></span>
                </a>
                
            
                
                <a href="/portfolio/anstech/" class="gallery image-popup-link text-center" style="background-image: url(/assets/img/portfolio/A&S.png);">
                    <span><i class="icon-search3"></i></span>
                </a>
                
            
    </div>
</div>

        </div>
    </div>
</nav>

	<div id="colorlib-page">
		<header>
    <div class="container">
        <div class="row">
            <div class="col-md-12">
                <div class="colorlib-navbar-brand">
                    <a class="colorlib-logo" href="http://localhost:4000"><span>2nd</span><span>gig</span></a>
                </div>
                <a href="#" class="js-colorlib-nav-toggle colorlib-nav-toggle"><i></i></a>
            </div>
        </div>
    </div>
</header>

		<div id="colorlib-blog">
    <div class="container">
        <div class="row text-center">
            <h2 class="bold">2nd Gig</h2>
        </div>
        <div class="row">
    <div class="col-md-12 col-md-offset-0 text-center animate-box intro-heading">
        <h2>URL Shortener - Firebase</h2>
        <span><small>4, February 2019 

    
    
         | 
        3
    
    
         minutes to read
    
</small></span>
        
            
                <a class="btn btn-primary btn-outline" href="#">Firebase</a>
            
                <a class="btn btn-primary btn-outline" href="#">Express.js</a>
            
                <a class="btn btn-primary btn-outline" href="#">TypeScript</a>
            
        
    </div>
</div>
        <!-- <div class="row">
            <div class="col-md-12 col-md-offset-0 text-center animate-box intro-heading">
                <h2>URL Shortener - Firebase</h2>
            </div>
        </div> -->
        <div class="row">
            <div class="col-md-12">
                <div class="rotate">
                    <h2 class="heading">Portfolio Item</h2>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-md-12">
                <div class="work-entry animate-box">
                    
                    <img class="img-cover" src="/assets/img/portfolio/juan-gomez-674574-unsplash.jpg" alt="">
                    
                    </a>
                    <div class="col-md-10 mx-auto">
                        <div class="desc">
                            <p class="read">
                                
                                <a href="https://unsplash.com/photos/kt-wA0GDFq8?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText">Photo by Juan Gomez on Unsplash</a>
                                
                            </p>
                            <p>As the name states this is a url shortener built on Firebase, it uses Firebase Realtime Database, Firebase Cloud Functions + Express.js, and Firebase Hosting. At it’s core the project used these services to query and read from the database to see if any data exits. The services are exposed in two ways; http endpoints that automatically handle things and API endpoints that respond in JSON. Let’s walk through some scenarios using HTTP.</p>

<h2 id="prerequisites">Prerequisites</h2>

<p>Before starting let’s talk about the project set up. The project is completely hosted on Firebase, this makes it easy to reroute URL requests through various ways. For this project we’ll be rerouting requests from <code class="highlighter-rouge">baseURL/r/${UUID}</code> to the function “reroute”. This will allow us to instantly process at the server level. As we will have an API we also need to set up an Express path, <code class="highlighter-rouge">/v0/url/:urlId/</code>. Lastly, we’ll set up two functions, shortenURL and redirect.</p>

<h2 id="generating-shortened-url">Generating Shortened URL</h2>

<p>Now that we have an idea of the set up let’s walk through the process of shortening a URL. A user goes to the <a href="https://url-shortner-3a035.firebaseapp.com/url">project homepage</a> where they can input the url. Once the user hits shorten we check the input to verify it is a valid url. If it is then we use the Firebase SDK to inoke our “onCall” function shortenURL. By using the Firebase SDK we don’t have to worry about the function’s url, preparing our request, and interpeting our response.</p>

<p>Now in the shortenURL function we sanitize our input, we remove trailing slashes and http info. This helps us avoid duplicates and makes it slightly easier to query. With our sanitized input ready we query the database for any entry that has our input as their original url. If an entry is found then we send the information back. Otherwise we generate a UUID, use it as a key for a new database entry. Once the entry is created we send back this entry.</p>

<p>Now in our client we receive a database entry, that was either new or existing, we then display this information to the user. And voila, we shortened a URL.</p>

<h2 id="using-shortened-url-http">Using Shortened URL (HTTP)</h2>

<p>Consuming a shorted URL is even simpler than generating it because of Firebase. The format of a shorted URL is <code class="highlighter-rouge">baseURL/r/${UUID}</code>, as per our set up any call to /r/ will be sent to the redirect function. Inside this function we use the UUID to directly find the exact entry in the database for our shortened URL, no querying required! If it exits we retrieve the original URL and send back a response that redirects the user to the original URL. If no entry is found then we redirect to the project home page.</p>

<h2 id="closing-thoughts">Closing Thoughts</h2>

<p>This write up isn’t meant to detail every step to recreate the project. It’s meant to give you an overview of the project. If you’re interested in learning more about feel free to visit the project repo and give it a try at the live link above. The project does use TypeScipt and some intermediate features of Firebase. So if you have any questions about it feel free to reach out.</p>

<p>Thanks for reading.</p>

<h2 id="live-demo">Live Demo</h2>
<p><a href="https://url-shortner-3a035.firebaseapp.com/url">Link</a></p>

<h2 id="source-code">Source Code</h2>
<p><a href="https://github.com/hpquintana/url-shortener">GitHub Repo</a></p>

                            <div class="author text-center">
                                <!-- <a href="about.html" class="author-img" style="background-image: url(images/about.jpg);"></a>
                                            <h3><a href="about.html">Vanessa Morgan</a></h3>
                                            <p>Mountains, she had a last view back on the skyline of her hometown Bookmarksgrove, the headline of Alphabet Village and the subline of her own road, the Line Lane.</p> -->
                                
<p class="colorlib-social-icons">
    
    
    <a href="https://twitter.com/hpquintana_dev"><i class="icon-twitter3"></i></a>
    
    
    
    <a href="https://github.com/hpquintana"><i class="icon-github"></i></a>
    
</p>

                            </div>
                            <div class="disqus">
                                <div id="disqus_thread"></div>
<script>

/**
*  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
*  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables*/
/*
var disqus_config = function () {
this.page.url = PAGE_URL;  // Replace PAGE_URL with your page's canonical URL variable
this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
};
*/
(function() { // DON'T EDIT BELOW THIS LINE
var d = document, s = d.createElement('script');
s.src = 'https://personal-blog-dwhjlpxf8m.disqus.com/embed.js';
s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
                            
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

		<footer>
    <div id="footer">
        <div class="container">
            <div class="row">
                
<div class="col-md-4 col-pb-sm">
    <div class="row">
        <div class="col-md-10">
            <h2>Get in Touch</h2>
            <p>Follow on my social medias</p>
            <p><a href="#">hector.quintana.dev@gmail.com</a></p>
            
<p class="colorlib-social-icons">
    
    
    <a href="https://twitter.com/hpquintana_dev"><i class="icon-twitter3"></i></a>
    
    
    
    <a href="https://github.com/hpquintana"><i class="icon-github"></i></a>
    
</p>

        </div>
    </div>
</div>

                
<div class="col-md-4 col-pb-sm">
    <h2>Latest Posts</h2>
    
    <div class="f-entry">
        <div class="desc">
            <span>30, January 2019</span>
            <h3><a href="/intro/2019/01/30/2nd-Gig/">2nd Gig</a></h3>
        </div>
    </div>
    
</div>

                <!-- <div class="col-md-4 col-pb-sm">
                    <h2>Newsletter</h2>
                    <p>A small river named Duden flows by their place and supplies it with the necessary regelialia</p>
                    <div class="subscribe text-center">
                        <div class="form-group">
                            <input type="text" class="form-control text-center" placeholder="Enter Email address">
                            <input type="submit" value="Subscribe" class="btn btn-primary btn-custom">
                        </div>
                    </div>
                </div> -->
            </div>
            <div class="row">
                <div class="col-md-12 text-center">
                    <p>
                        &copy; <!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->
Copyright &copy;<script>document.write(new Date().getFullYear());</script> All rights reserved | This template is made with <i class="icon-heart4" aria-hidden="true"></i> by <a href="https://colorlib.com" target="_blank">Colorlib</a>
<!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->
                    </p>
                </div>
            </div>
        </div>
    </div>
</footer>

<!-- jQuery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.js"></script>
<!-- jQuery Easing -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-easing/1.4.1/jquery.easing.js"></script>
<!-- Bootstrap -->
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/js/bootstrap.min.js" integrity="sha384-B0UglyR+jN6CkvvICOB2joaf5I4l3gm9GU6Hc1og6Ls7i6U/mkkaduKaBhlAXv9k"
crossorigin="anonymous"></script>
<!-- Waypoints -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/waypoints/4.0.1/jquery.waypoints.js"></script>
<!-- Owl Carousel -->
<script src="/assets/js/owl.carousel.min.js"></script>
<!-- Magnific Popup -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/magnific-popup.js/1.1.0/jquery.magnific-popup.js"></script>
<script src="/assets/js/magnific-popup-options.js"></script>


<!-- Main JS (Do not remove) -->
<script src="/assets/js/main.js"></script>

	</div>
</body>

</html>